# مُصدِّر الفواتير المجاني - ETA Invoice Exporter

إضافة Chrome مجانية لاستخراج وتصدير بيانات الفواتير من بوابة الفاتورة الإلكترونية المصرية.

## 🚀 المميزات

### الوظائف الأساسية
- **استخراج البيانات**: استخراج بيانات الفواتير من جداول بوابة الضرائب المصرية
- **اختيار الأعمدة**: اختر الأعمدة التي تريد تضمينها في التصدير
- **تنسيقات متعددة**: تصدير إلى Excel، JSON، XML، و PDF
- **دمج الصفحات**: دمج البيانات من صفحات متعددة في ملف واحد
- **فلاتر تلقائية**: إضافة فلاتر تلقائية لجميع الأعمدة في ملف Excel
- **واجهة احترافية**: تصميم نظيف وحديث باللغة العربية

### المميزات التقنية
- **مجاني تماماً**: بدون اشتراكات أو رسوم
- **آمن**: يعمل محلياً بدون إرسال البيانات لخوادم خارجية
- **سهل الاستخدام**: واجهة بسيطة ومفهومة
- **سريع**: استخراج وتصدير سريع للبيانات

## 📦 التثبيت

### الخطوة 1: تحميل المكتبات المطلوبة
قم بتحميل الملفات التالية ووضعها في مجلد `libs/`:

1. **xlsx.min.js** - لتصدير Excel
   - اذهب إلى: https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js
   - احفظ الملف باسم `xlsx.min.js`

2. **jspdf.min.js** - لتصدير PDF
   - اذهب إلى: https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js
   - احفظ الملف باسم `jspdf.min.js`

### الخطوة 2: إضافة الأيقونات
أضف أيقونات الإضافة في مجلد `icons/`:
- `icon16.png` (16x16 بكسل)
- `icon32.png` (32x32 بكسل)  
- `icon48.png` (48x48 بكسل)
- `icon128.png` (128x128 بكسل)

### الخطوة 3: تثبيت الإضافة في Chrome
1. افتح Chrome واذهب إلى `chrome://extensions/`
2. فعّل "وضع المطور" (Developer mode)
3. اضغط "تحميل إضافة غير مُعبأة" (Load unpacked)
4. اختر مجلد `chrome-extension`

## 🔧 الاستخدام

### البدء
1. اذهب إلى بوابة الفاتورة الإلكترونية: https://invoicing.eta.gov.eg/documents
2. سجل دخولك وانتقل إلى صفحة المستندات
3. اضغط على أيقونة الإضافة في شريط الأدوات
4. اضغط "ابدأ الاستخدام"

### اختيار البيانات
1. ستظهر قائمة بأعمدة الجدول المتاحة
2. اختر الأعمدة التي تريد تصديرها
3. يمكنك اختيار "اختيار جميع الأعمدة" لتحديد الكل

### خيارات التصدير
- **دمج جميع الصفحات**: سيتم استخراج البيانات من جميع الصفحات ودمجها في ملف واحد
- **تضمين عناوين الأعمدة**: إضافة أسماء الأعمدة في الصف الأول
- **استخراج العناوين الحقيقية**: استخراج عناوين البائع والمشترى من صفحات التفاصيل (يزيد وقت التحميل)

### التصدير
اختر تنسيق التصدير المطلوب:
- **Excel**: ملف .xlsx مع تنسيق احترافي وفلاتر تلقائية
- **JSON**: ملف .json للاستخدام البرمجي
- **XML**: ملف .xml منظم
- **PDF**: ملف .pdf للطباعة والمشاركة

### مميزات ملف Excel
- **فلاتر تلقائية**: جميع الأعمدة تحتوي على فلاتر للفرز والتصفية
- **تنسيق احترافي**: ألوان متناوبة وأعمدة منسقة
- **روابط تفاعلية**: روابط للانتقال بين الصفحات الرئيسية والتفاصيل
- **إحصائيات**: صفحة منفصلة تحتوي على إحصائيات شاملة للبيانات
- **عناوين مكتملة**: أعمدة العناوين دائماً موجودة مع قيمة افتراضية "غير محدد" عند عدم توفر العنوان

### استخراج العناوين الحقيقية
- **خيار اختياري**: يمكن تفعيل استخراج العناوين الحقيقية للبائع والمشترى
- **استخراج تلقائي**: يفتح كل فاتورة ويستخرج العنوان من صفحة التفاصيل
- **عودة آمنة**: يعود تلقائياً إلى القائمة الرئيسية بعد استخراج كل عنوان
- **معالجة الأخطاء**: في حالة فشل استخراج العنوان، يتم استخدام "غير محدد"
- **تحذير الأداء**: هذه الميزة تزيد وقت التحميل بشكل كبير

## 🛠️ استكشاف الأخطاء

### مشاكل شائعة

**الإضافة لا تعمل:**
- تأكد من أنك في صفحة المستندات الصحيحة
- تحقق من تثبيت المكتبات المطلوبة
- أعد تحميل الصفحة وحاول مرة أخرى

**لا يتم اكتشاف الجدول:**
- تأكد من تحميل الصفحة بالكامل
- تحقق من وجود بيانات في الجدول
- جرب تحديث الصفحة

**فشل التصدير:**
- تحقق من المساحة المتاحة على القرص
- تأكد من عدم حظر المتصفح للتحميلات
- جرب تنسيق تصدير آخر

**بطء التحميل مع استخراج العناوين:**
- استخراج العناوين الحقيقية يزيد وقت التحميل بشكل كبير
- يمكن إلغاء تفعيل هذه الميزة لتسريع التحميل
- تأكد من وجود اتصال إنترنت مستقر

### تفعيل وضع التطوير
لمشاهدة رسائل التشخيص:
1. اضغط F12 لفتح أدوات المطور
2. اذهب إلى تبويب Console
3. ابحث عن رسائل الخطأ

## 🔒 الأمان والخصوصية

### حماية البيانات
- **معالجة محلية**: جميع البيانات تتم معالجتها محلياً في متصفحك
- **عدم الإرسال**: لا يتم إرسال أي بيانات لخوادم خارجية
- **أذونات محدودة**: الإضافة تطلب أقل الأذونات المطلوبة

### الأذونات المطلوبة
- **activeTab**: للوصول إلى الصفحة النشطة فقط
- **storage**: لحفظ إعدادات الإضافة
- **scripting**: لاستخراج البيانات من الجدول

## 📊 الإحصائيات

الإضافة تحتفظ بإحصائيات بسيطة محلياً:
- عدد مرات الاستخدام
- تاريخ التثبيت
- آخر استخدام

هذه البيانات محفوظة محلياً ولا يتم مشاركتها.

## 🆘 الدعم

### الحصول على المساعدة
إذا واجهت أي مشاكل:
1. راجع قسم استكشاف الأخطاء أعلاه
2. تأكد من اتباع تعليمات التثبيت بدقة
3. جرب إعادة تثبيت الإضافة

### الإبلاغ عن المشاكل
لتحسين الإضافة، يمكنك:
- وصف المشكلة بالتفصيل
- ذكر خطوات إعادة إنتاج المشكلة
- إرفاق لقطة شاشة إن أمكن

## 📄 الترخيص

هذه الإضافة مجانية ومفتوحة المصدر للاستخدام الشخصي والتجاري.

## 🔄 التحديثات

### الإصدار 1.0.0
- الإصدار الأولي
- استخراج البيانات الأساسي
- تصدير متعدد التنسيقات
- واجهة عربية

### التحديثات المخططة
- تحسينات في الأداء
- دعم المزيد من تنسيقات التصدير
- خيارات تصفية متقدمة
- حفظ الإعدادات المفضلة

### الإصدار الحالي
- **استخراج العناوين الحقيقية**: ميزة جديدة لاستخراج عناوين البائع والمشترى من صفحات التفاصيل
- **تحسينات في الأداء**: تحسين سرعة استخراج البيانات
- **معالجة أفضل للأخطاء**: تحسين التعامل مع الأخطاء والاستثناءات

---

**ملاحظة**: هذه الإضافة غير مرتبطة رسمياً بمصلحة الضرائب المصرية. إنها أداة مساعدة مطورة لتسهيل العمل مع بوابة الفاتورة الإلكترونية.